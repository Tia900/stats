<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>График настроений продуктового офиса</title>
    <!-- Подключение библиотек Chart.js и Moment.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
</head>
<body>
    <div style="width: 80%; margin: 0 auto;">
        <!-- Создание элемента canvas для графика -->
        <canvas id="moodChart"></canvas>
    </div>

    <script>
        // Данные по опросам из телеграм-канала
        var data = {
            labels: [
                '10-10-2023', '19-10-2023', '26-10-2023', '03-11-2023', '10-11-2023', '17-11-2023',
                '23-11-2023', '01-12-2023', '08-12-2023', '15-12-2023', '22-12-2023', '29-12-2023',
                '05-01-2024', '12-01-2024', '19-01-2024', '26-01-2024', '02-02-2024'
            ],
            datasets: [
                {
                    label: 'Положительно',
                    data: [31, 21, 44, 41, 31, 55, 35, 31, 48, 35, 39, 39, 39, 25, 24, 28, 24],
                    borderColor: 'green',
                    backgroundColor: 'rgba(0, 128, 0, 0.5)'
                },
                {
                    label: 'Нейтрально',
                    data: [61, 50, 37, 47, 63, 28, 47, 44, 26, 24, 17, 17, 17, 37, 29, 28, 41],
                    borderColor: 'blue',
                    backgroundColor: 'rgba(0, 0, 128, 0.5)'
                },
                {
                    label: 'Негативно',
                    data: [8, 29, 19, 12, 6, 17, 18, 25, 26, 41, 44, 44, 44, 37, 47, 44, 35],
                    borderColor: 'red',
                    backgroundColor: 'rgba(255, 0, 0, 0.5)'
                },
                {
                    label: 'Опрашиваемые',
                    type: 'bar',
                    data: [13, 14, 16, 17, 16, 18, 17, 16, 19, 17, 18, 0, 0, 16, 17, 18, 17],
                    backgroundColor: 'grey',
                    yAxisID: 'votersAxis'
                }
            ]
        };

        var options = {
            scales: {
                x: {
                    type: 'time',
                    time: {
                        parser: 'DD-MM-YYYY',
                        tooltipFormat: 'DD-MM-YYYY',
                        unit: 'day',
                        unitStepSize: 1,
                        displayFormats: {
                            day: 'DD-MM-YYYY'
                        }
                    },
                    title: {
                        display: true,
                        text: 'Дата'
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: 'Процент проголосовавших'
                    },
                    min: 0,
                    max: 100
                },
                votersAxis: {
                    position: 'right',
                    title: {
                        display: true,
                        text: 'Количество проголосовавших'
                    },
                    min: 0
                }
            }
        };

        // Создание и отображение графика
        var ctx = document.getElementById('moodChart').getContext('2d');
        var moodChart = new Chart(ctx, {
            type: 'line',
            data: data,
            options: options
        });
    </script>
</body>
</html>
